{% extends "base.html" %}

{% block include_files %}
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAAQDOZpCb33qnlU5xcBmf_n8CQ4p_qg6s&sensor=false">
    </script>
<script type="text/javascript">
var map;

function initialize() {
  var mapOptions = {
    center: new google.maps.LatLng(38.783360, -78.295143),
    zoom: 14,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };
  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  show_locations()
}

function show_locations() {
{% if locations %}
var marker = [];
{% for loc in locations %}
	marker[{{ forloop.counter0 }}] = new google.maps.Marker({
		position: new google.maps.LatLng({{ loc.lat }}, {{ loc.lon }}),
		map: map,
		title:"{{ loc.name }}"
	});
	google.maps.event.addListener(marker[ {{ forloop.counter0 }} ], 'click', function() {
		var infowindow = new google.maps.InfoWindow({ content: "<h3>{{ loc.name }}</h3>{{ loc.lat }}, {{ loc.lon }}" });
		infowindow.open(map,marker[ {{ forloop.counter0 }} ]);
    });
{% endfor %}
{% endif %}
}


window.onload = initialize;
</script>
{% endblock %}

{% block title %}Ice Conditions{% endblock %}


{% block content %}

<div id="map_canvas" style="width:100%; height:100%"></div>

{% endblock %}